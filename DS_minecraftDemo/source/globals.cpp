#include <nds.h>

#include "globals.h"
#include "vector.h"

SpriteEntry* g_highlighter;
u16* highlighterTilesLoc;

u16** widthDotsLoc;
int widthSelection;
int width;

u16* colorGrid;
vector colorGridSelection;

const unsigned short color_buttonTiles[512] __attribute__((aligned(4)))=
{
	0x0000,0x2220,0x2000,0x2222,0x2200,0x3332,0x2220,0x3333,
	0x3222,0x4333,0x3322,0x4433,0x3322,0x4443,0x3322,0x4444,
	0x2222,0x2222,0x2222,0x2222,0x3333,0x3333,0x3333,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x2222,0x2222,0x2222,0x2222,0x4333,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x2222,0x2222,0x2222,0x2222,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,

	0x2222,0x2222,0x2222,0x2222,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x2222,0x2222,0x2222,0x2222,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x2222,0x2222,0x2222,0x2222,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x0222,0x0000,0x2222,0x0002,0x2444,0x0022,0x4444,0x0222,
	0x4444,0x0224,0x4444,0x2244,0x4444,0x2244,0x4444,0x2244,

	0x3322,0x4444,0x3322,0x4444,0x3322,0x4444,0x4322,0x4444,
	0x4322,0x4444,0x4322,0x4444,0x4322,0x4444,0x4322,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,

	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x2244,0x4444,0x2244,0x4444,0x2244,0x4444,0x2244,
	0x4444,0x2244,0x4444,0x2244,0x4444,0x2244,0x4444,0x2244,

	0x4422,0x4444,0x4422,0x4444,0x4422,0x4444,0x4422,0x4444,
	0x4422,0x4444,0x4422,0x4444,0x4422,0x4444,0x4422,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,

	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x2244,0x4444,0x2214,0x4444,0x2214,0x4444,0x2214,
	0x4444,0x2214,0x4444,0x2211,0x4444,0x2211,0x4444,0x2211,

	0x4422,0x4444,0x4422,0x4444,0x4422,0x4444,0x4220,0x4444,
	0x2220,0x4444,0x2200,0x4442,0x2000,0x2222,0x0000,0x2220,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x2222,0x2222,0x2222,0x2222,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x2222,0x2222,0x2222,0x2222,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x2222,0x2222,0x2222,0x2222,

	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x4444,0x2222,0x2222,0x2222,0x2222,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x4444,0x4444,0x1114,0x2222,0x2222,0x2222,0x2222,
	0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,0x4444,
	0x4444,0x1111,0x1111,0x1111,0x2222,0x2222,0x2222,0x2222,
	0x4444,0x2211,0x1444,0x2211,0x1144,0x2211,0x1114,0x0221,
	0x1111,0x0222,0x2111,0x0022,0x2222,0x0002,0x0222,0x0000,
};

const unsigned short highlighterTiles[512] __attribute__((aligned(4)))=
{
	0x0000,0x5550,0x5000,0x5555,0x5500,0x0005,0x5550,0x0000,
	0x0550,0x0000,0x0055,0x0000,0x0055,0x0000,0x0055,0x0000,
	0x5555,0x5555,0x5555,0x5555,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x5555,0x5555,0x5555,0x5555,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x5555,0x5555,0x5555,0x5555,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,

	0x5555,0x5555,0x5555,0x5555,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x5555,0x5555,0x5555,0x5555,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x5555,0x5555,0x5555,0x5555,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0555,0x0000,0x5555,0x0005,0x5000,0x0055,0x0000,0x0555,
	0x0000,0x0550,0x0000,0x5500,0x0000,0x5500,0x0000,0x5500,

	0x0055,0x0000,0x0055,0x0000,0x0055,0x0000,0x0055,0x0000,
	0x0055,0x0000,0x0055,0x0000,0x0055,0x0000,0x0055,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,

	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x5500,0x0000,0x5500,0x0000,0x5500,0x0000,0x5500,
	0x0000,0x5500,0x0000,0x5500,0x0000,0x5500,0x0000,0x5500,

	0x0055,0x0000,0x0055,0x0000,0x0055,0x0000,0x0055,0x0000,
	0x0055,0x0000,0x0055,0x0000,0x0055,0x0000,0x0055,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,

	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x5500,0x0000,0x5500,0x0000,0x5500,0x0000,0x5500,
	0x0000,0x5500,0x0000,0x5500,0x0000,0x5500,0x0000,0x5500,

	0x0055,0x0000,0x0055,0x0000,0x0055,0x0000,0x0550,0x0000,
	0x5550,0x0000,0x5500,0x0005,0x5000,0x5555,0x0000,0x5550,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x5555,0x5555,0x5555,0x5555,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x5555,0x5555,0x5555,0x5555,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x5555,0x5555,0x5555,0x5555,

	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x5555,0x5555,0x5555,0x5555,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x5555,0x5555,0x5555,0x5555,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x5555,0x5555,0x5555,0x5555,
	0x0000,0x5500,0x0000,0x5500,0x0000,0x5500,0x0000,0x0550,
	0x0000,0x0555,0x5000,0x0055,0x5555,0x0005,0x0555,0x0000,
};

const unsigned short instructionsTiles[512] __attribute__((aligned(4)))=
{
	0x0000,0x0000,0x5550,0x5555,0x5050,0x5555,0x5050,0x5555,
	0x5050,0x5555,0x0050,0x5550,0x5550,0x5555,0x5550,0x0005,
	0x0000,0x0000,0x0500,0x5555,0x0500,0x0555,0x0500,0x0555,
	0x0550,0x0555,0x0050,0x0555,0x0050,0x5555,0x0050,0x5000,
	0x0000,0x0000,0x0555,0x0000,0x0550,0x5000,0x0505,0x5000,
	0x0550,0x5000,0x0505,0x5000,0x0555,0x0000,0x0555,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x5000,0x0050,0x5000,0x0000,
	0x5000,0x0050,0x5050,0x5050,0x0505,0x0050,0x0000,0x0000,

	0x0000,0x0000,0x0000,0x0000,0x0500,0x0050,0x0500,0x0555,
	0x0555,0x0050,0x0500,0x0050,0x0555,0x0050,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0005,0x0000,0x0005,0x0000,
	0x0555,0x0000,0x5005,0x0000,0x5005,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,

	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x5000,0x0000,0x5000,0x0000,0x5000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x5555,0x0000,0x5505,0x0000,0x5000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,

	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,

	0x0000,0x5000,0x0000,0x5000,0x5500,0x5555,0x5500,0x5550,
	0x0500,0x5550,0x5500,0x5550,0x5500,0x5555,0x0000,0x5000,
	0x5555,0x0000,0x5555,0x0000,0x5555,0x5555,0x5555,0x5055,
	0x5555,0x0055,0x5555,0x5055,0x5555,0x5555,0x5555,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0005,0x0000,0x0005,0x5000,
	0x0005,0x5000,0x0005,0x5000,0x0005,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0555,0x0000,0x0000,0x0050,
	0x0000,0x0505,0x0000,0x0505,0x0555,0x0050,0x0000,0x0000,

	0x0000,0x0000,0x0000,0x0000,0x0005,0x0000,0x5005,0x5000,
	0x0505,0x0505,0x0505,0x0505,0x5005,0x0500,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0005,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,

	0x0000,0x5000,0x0000,0x5000,0x0000,0x5000,0x0000,0x5000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x5555,0x0000,0x5000,0x0000,0x5505,0x0000,0x5555,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,

	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
};

const unsigned short width_4Tiles[16] __attribute__((aligned(4)))=
{
	0x5500,0x0005,0x5550,0x0055,0x5555,0x0555,0x5555,0x0555,
	0x5555,0x0555,0x5550,0x0055,0x5500,0x0005,0x0000,0x0000,
};
const unsigned short width_3Tiles[16] __attribute__((aligned(4)))=
{
	0x0000,0x0000,0x5500,0x0005,0x5550,0x0055,0x5550,0x0055,
	0x5550,0x0055,0x5500,0x0005,0x0000,0x0000,0x0000,0x0000,
};
const unsigned short width_2Tiles[16] __attribute__((aligned(4)))=
{
	0x0000,0x0000,0x0000,0x0000,0x5000,0x0000,0x5500,0x0005,
	0x5000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
};
const unsigned short width_1Tiles[16] __attribute__((aligned(4)))=
{
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x5000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
};

const unsigned short sprite_Pal[256] __attribute__((aligned(4)))=
{
	0x7FE0,0x0015,0x000F,0x319F,0x001F,0x7fff,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x7FE0,0x0135,0x010F,0x32BF,0x01FF,0x318C,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x7FE0,0x02B5,0x01EF,0x7FFF,0x03FF,0x7fff,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x7FE0,0x02A0,0x01E0,0x57F5,0x03E0,0x7fff,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,

	0x7FE0,0x5400,0x3C00,0x7D8C,0x7C00,0x7fff,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x7FE0,0x5408,0x3C00,0x7D95,0x7C0F,0x7fff,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x7FE0,0x0C63,0x0000,0x2108,0x1084,0x7fff,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x7FE0,0x2108,0x18C6,0x3DEF,0x318C,0x7fff,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,

	0x7FE0,0x6739,0x56B5,0x7FFF,0x77BD,0x7fff,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x7FE0,0x0088,0x0066,0x010F,0x00CC,0x7fff,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x7FE0,0x0015,0x0066,0x010F,0x00CC,0x7fff,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x7FE0,0x0015,0x0008,0x319F,0x001F,0x7fff,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,

	0x7FE0,0x0015,0x0008,0x319F,0x001F,0x7fff,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x7FE0,0x0015,0x0008,0x319F,0x001F,0x7fff,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x7FE0,0x0015,0x0008,0x319F,0x001F,0x7fff,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
	0x7FE0,0x0015,0x0008,0x319F,0x001F,0x7fff,0x0000,0x0000,
	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
};